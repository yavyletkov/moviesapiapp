(this.webpackJsonpmoviesapiapp=this.webpackJsonpmoviesapiapp||[]).push([[0],{12:function(e,t,a){e.exports={sidebar:"Sidebar_sidebar__3qUkX",opened:"Sidebar_opened__1h8OJ",arrow:"Sidebar_arrow__3oWmJ"}},25:function(e,t,a){e.exports={cardsWrapper:"CardsWrapper_cardsWrapper__3V69y"}},29:function(e,t,a){e.exports=a(59)},34:function(e,t,a){},35:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(6),o=a.n(c),i=(a(34),a(35),a(2)),s=a(12),l=a.n(s),u=a(27),m=a(3),d=a(23),p="999980599119f1890b5daf0c2e763b81",v={getMovies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"popularity.desc",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return d.get("https://api.themoviedb.org/3/discover/movie?api_key=".concat(p,"&language=en-EN&sort_by=").concat(e,"&page=").concat(t)).then((function(e){return e.data}))},getMoviesByFetch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"popularity.desc",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;fetch("https://api.themoviedb.org/3/discover/movie?api_key=".concat(p,"&language=en-EN&sort_by=").concat(e,"&page=").concat(t)).then((function(e){return e.json()})).then((function(e){return console.log("aaaaa",e),e}))}},g={currentPage:1,movies:[],toWatch:[],sortBy:"popularity.desc"},E=function(e){return{type:"SET-MOVIES",movies:e}},h=function(e){return{type:"SET-CURRENT-PAGE",page:e}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-MOVIES":return Object(m.a)(Object(m.a)({},e),{},{movies:t.movies});case"ADD-IN-TO-WATCH":var a={id:t.id,title:t.title};return Object(m.a)(Object(m.a)({},e),{},{toWatch:[].concat(Object(u.a)(e.toWatch),[a])});case"REMOVE-FROM-TO-WATCH":return Object(m.a)(Object(m.a)({},e),{},{toWatch:e.toWatch.filter((function(e){return e.id!==t.id}))});case"SET-CURRENT-PAGE":return Object(m.a)(Object(m.a)({},e),{},{currentPage:t.page});case"SET-SORT-BY":return Object(m.a)(Object(m.a)({},e),{},{sortBy:t.method});default:return e}},b=Object(i.b)((function(e){return{toWatch:e.toWatch}}),h)((function(e){var t=e.toWatch.map((function(e){return r.a.createElement("div",{className:"card m-3 p-3",key:e.id},e.title)})),a=r.a.useRef(),n=function(){a.current.classList.toggle("".concat(l.a.opened))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{ref:a,className:l.a.sidebar,onClick:n},e.toWatch.length?null:r.a.createElement("h5",{className:"m-3"},'Click "Add movie"'),r.a.createElement("div",null,t)),r.a.createElement("button",{onClick:n,className:"btn btn-primary watchListBtn"},"WATCH LIST"))})),y=a(8),O=a(24),N=function(e){for(var t=e.pagesCount,a=void 0===t?500:t,c=(e.pageSize,e.currentPage),o=void 0===c?1:c,i=e.portionSize,s=void 0===i?10:i,l=e.onPageChange,u=[],m=0;m<=a;m++)u.push(m);var d=Math.ceil(a/s),p=Object(n.useState)(1),v=Object(y.a)(p,2),g=v[0],E=v[1],h=(g-1)*s+1,f=g*s;return r.a.createElement("nav",null,r.a.createElement("ul",{className:"pagination justify-content-center mt-3"},g>1&&r.a.createElement("li",{className:"page-item",onClick:function(){return E(g-1)}},r.a.createElement("span",{className:"page-link"},"PREV")),u.filter((function(e){return e>=h&&e<=f})).map((function(e){var t=O("page-item",{active:+e===o});return r.a.createElement("li",{className:t,key:e},r.a.createElement("span",{className:"page-link",onClick:function(){return l(e)}},e))})),g<d&&r.a.createElement("li",{className:"page-item",onClick:function(){return E(g+1)}},r.a.createElement("span",{className:"page-link"},"NEXT"))))},W=a(28),T=function(e){var t=e.movie,a=e.addInToWatch,c=e.removeFromToWatch,o=e.toWatch,i=Object(n.useState)((function(){if(o.length)for(var e=0;e<=o.length;e++)if(o[e]&&o[e].id===t.id)return!0;return!1})),s=Object(y.a)(i,2),l=s[0],u=s[1],m=function(){l?(c(t.id,t.title),u(!1)):(a(t.id,t.title),u(!0))};return r.a.createElement("div",{className:"card"},r.a.createElement("img",{className:"card-img-top",src:"https://image.tmdb.org/t/p/w500/".concat(t.backdrop_path||t.poster_path),alt:""}),r.a.createElement("div",{className:"card-body"},r.a.createElement("h6",{className:"card-title"},t.title),r.a.createElement("p",null,"Rating: ",t.vote_average),l?r.a.createElement("button",{className:"btn btn-primary",onClick:m},"Remove movie"):r.a.createElement("button",{className:"btn btn-secondary",onClick:m},"Add movie")))},_=a(25),k=a.n(_),j=Object(i.b)((function(e){return{movies:e.movies,currentPage:e.currentPage,sortBy:e.sortBy,toWatch:e.toWatch}}),{setMovies:E,getMovies:function(e,t){return function(a){v.getMovies(e,t).then((function(e){a(E(e.results))}))}},addInToWatch:function(e,t){return{type:"ADD-IN-TO-WATCH",id:e,title:t}},removeFromToWatch:function(e,t){return{type:"REMOVE-FROM-TO-WATCH",id:e,title:t}}})((function(e){var t=e.getMovies,a=Object(W.a)(e,["getMovies"]);return Object(n.useEffect)((function(){t(a.sortBy,a.currentPage)}),[t,a.currentPage,a.sortBy]),r.a.createElement("main",{className:k.a.cardsWrapper},a.movies.map((function(e){return r.a.createElement(T,{key:e.id,movie:e,toWatch:a.toWatch,addInToWatch:a.addInToWatch,removeFromToWatch:a.removeFromToWatch})})))})),C=Object(i.b)((function(e){return{sortBy:e.sortBy}}),{setSortBy:function(e){return{type:"SET-SORT-BY",method:e}}})((function(e){var t=e.setSortBy,a=e.sortBy;return r.a.createElement("ul",{className:"tabs nav nav-pills justify-content-center mt-3"},r.a.createElement("li",{className:"nav-item",onClick:function(){return t("popularity.desc")}},r.a.createElement("span",{className:"nav-link"+("popularity.desc"===a?" active":"")},"Sort by popularity .desc")),r.a.createElement("li",{className:"nav-item",onClick:function(){return t("revenue.desc")}},r.a.createElement("span",{className:"nav-link"+("revenue.desc"===a?" active":"")},"Sort by revenue .desc")),r.a.createElement("li",{className:"nav-item",onClick:function(){return t("primary_release_date.desc")}},r.a.createElement("span",{className:"nav-link"+("primary_release_date.desc"===a?" active":"")},"Sort by release date .desc")))})),S=Object(i.b)((function(e){return{currentPage:e.currentPage}}),{setCurrentPage:h})((function(e){var t=function(t){e.setCurrentPage(t)};return r.a.createElement("div",null,r.a.createElement(C,null),r.a.createElement(N,{currentPage:e.currentPage,onPageChange:t}),r.a.createElement(j,null),r.a.createElement(N,{currentPage:e.currentPage,onPageChange:t}))})),P=Object(i.b)(null)((function(e){return r.a.createElement(i.a,{store:e.store},r.a.createElement("div",{className:"App"},r.a.createElement(S,null),r.a.createElement(b,null)))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var w=a(4),B=a(26),M=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||w.c,R=Object(w.d)(f,M(Object(w.a)(B.a)));window.store=R;var A=R;o.a.render(r.a.createElement(P,{store:A}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[29,1,2]]]);
//# sourceMappingURL=main.9e1eff6d.chunk.js.map