(this.webpackJsonpmoviesapiapp=this.webpackJsonpmoviesapiapp||[]).push([[0],{22:function(e,t,a){e.exports={sidebar:"Sidebar_sidebar__3qUkX"}},25:function(e,t,a){e.exports={cardsWrapper:"CardsWrapper_cardsWrapper__3V69y"}},29:function(e,t,a){e.exports=a(59)},34:function(e,t,a){},35:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(6),o=a.n(c),i=(a(34),a(35),a(2)),s=a(22),l=a.n(s),u=a(27),m=a(3),d=a(23),p=(d.create({baseURL:"https://api.themoviedb.org/3/discover/movie"}),{currentPage:1,movies:[],toWatch:[],sortBy:"popularity.desc"}),v=function(e){return{type:"SET-MOVIES",movies:e}},E=function(e){return{type:"SET-CURRENT-PAGE",page:e}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-MOVIES":return Object(m.a)(Object(m.a)({},e),{},{movies:t.movies});case"ADD-IN-TO-WATCH":var a={id:t.id,title:t.title};return Object(m.a)(Object(m.a)({},e),{},{toWatch:[].concat(Object(u.a)(e.toWatch),[a])});case"REMOVE-FROM-TO-WATCH":return Object(m.a)(Object(m.a)({},e),{},{toWatch:e.toWatch.filter((function(e){return e.id!==t.id}))});case"SET-CURRENT-PAGE":return Object(m.a)(Object(m.a)({},e),{},{currentPage:t.page});case"SET-SORT-BY":return Object(m.a)(Object(m.a)({},e),{},{sortBy:t.method});default:return e}},g=Object(i.b)((function(e){return{toWatch:e.toWatch}}),E)((function(e){var t=e.toWatch.map((function(e){return r.a.createElement("div",{className:"card m-3 p-3",key:e.id},e.title)}));return r.a.createElement("div",{className:l.a.sidebar},r.a.createElement("div",{className:"m-3"},r.a.createElement("h2",null,"TO WATCH")),r.a.createElement("div",null,t))})),h=a(8),b=a(24),O=function(e){for(var t=e.pagesCount,a=void 0===t?500:t,c=(e.pageSize,e.currentPage),o=void 0===c?1:c,i=e.portionSize,s=void 0===i?10:i,l=e.onPageChange,u=[],m=0;m<=a;m++)u.push(m);var d=Math.ceil(a/s),p=Object(n.useState)(1),v=Object(h.a)(p,2),E=v[0],f=v[1],g=(E-1)*s+1,O=E*s;return r.a.createElement("nav",null,r.a.createElement("ul",{className:"pagination justify-content-center mt-3"},E>1&&r.a.createElement("li",{className:"page-item",onClick:function(){return f(E-1)}},r.a.createElement("span",{className:"page-link"},"PREV")),u.filter((function(e){return e>=g&&e<=O})).map((function(e){var t=b("page-item",{active:+e===o});return r.a.createElement("li",{className:t,key:e},r.a.createElement("span",{className:"page-link",onClick:function(){return l(e)}},e))})),E<d&&r.a.createElement("li",{className:"page-item",onClick:function(){return f(E+1)}},r.a.createElement("span",{className:"page-link"},"NEXT"))))},y=a(28),N=function(e){var t=e.movie,a=e.addInToWatch,c=e.removeFromToWatch,o=e.toWatch,i=Object(n.useState)((function(){if(o.length)for(var e=0;e<=o.length;e++)if(o[e]&&o[e].id===t.id)return!0;return!1})),s=Object(h.a)(i,2),l=s[0],u=s[1],m=function(){l?(c(t.id,t.title),u(!1)):(a(t.id,t.title),u(!0))};return r.a.createElement("div",{className:"card"},r.a.createElement("img",{className:"card-img-top",src:"https://image.tmdb.org/t/p/w500/".concat(t.backdrop_path||t.poster_path),alt:""}),r.a.createElement("div",{className:"card-body"},r.a.createElement("h6",{className:"card-title"},t.title),r.a.createElement("p",null,"Rating: ",t.vote_average),l?r.a.createElement("button",{className:"btn btn-primary",onClick:m},"Remove movie"):r.a.createElement("button",{className:"btn btn-secondary",onClick:m},"Add movie")))},T=a(25),W=a.n(T),j=Object(i.b)((function(e){return{movies:e.movies,currentPage:e.currentPage,sortBy:e.sortBy,toWatch:e.toWatch}}),{setMovies:v,getMovies:function(e,t){return function(a){fetch("https://api.themoviedb.org/3/discover/movie?api_key=999980599119f1890b5daf0c2e763b81&language=en-EN&sort_by=".concat(e,"&page=").concat(t)).then((function(e){return e.json()})).then((function(e){return e})).then((function(e){console.log("ITEM",e.results[0]),a(v(e.results))}))}},addInToWatch:function(e,t){return{type:"ADD-IN-TO-WATCH",id:e,title:t}},removeFromToWatch:function(e,t){return{type:"REMOVE-FROM-TO-WATCH",id:e,title:t}}})((function(e){var t=e.getMovies,a=Object(y.a)(e,["getMovies"]);return Object(n.useEffect)((function(){t(a.sortBy,a.currentPage)}),[t,a.currentPage,a.sortBy]),r.a.createElement("main",{className:W.a.cardsWrapper},a.movies.map((function(e){return r.a.createElement(N,{key:e.id,movie:e,toWatch:a.toWatch,addInToWatch:a.addInToWatch,removeFromToWatch:a.removeFromToWatch})})))})),k=Object(i.b)((function(e){return{sortBy:e.sortBy}}),{setSortBy:function(e){return{type:"SET-SORT-BY",method:e}}})((function(e){var t=e.setSortBy,a=e.sortBy;return r.a.createElement("ul",{className:"tabs nav nav-pills justify-content-center mt-3"},r.a.createElement("li",{className:"nav-item",onClick:function(){return t("popularity.desc")}},r.a.createElement("span",{className:"nav-link"+("popularity.desc"===a?" active":"")},"Sort by popularity .desc")),r.a.createElement("li",{className:"nav-item",onClick:function(){return t("revenue.desc")}},r.a.createElement("span",{className:"nav-link"+("revenue.desc"===a?" active":"")},"Sort by revenue .desc")),r.a.createElement("li",{className:"nav-item",onClick:function(){return t("primary_release_date.desc")}},r.a.createElement("span",{className:"nav-link"+("primary_release_date.desc"===a?" active":"")},"Sort by release date .desc")))})),C=Object(i.b)((function(e){return{currentPage:e.currentPage}}),{setCurrentPage:E})((function(e){var t=function(t){e.setCurrentPage(t)};return r.a.createElement("div",null,r.a.createElement(k,null),r.a.createElement(O,{currentPage:e.currentPage,onPageChange:t}),r.a.createElement(j,null),r.a.createElement(O,{currentPage:e.currentPage,onPageChange:t}))})),S=Object(i.b)(null)((function(e){return r.a.createElement(i.a,{store:e.store},r.a.createElement("div",{className:"App"},r.a.createElement(C,null),r.a.createElement(g,null)))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var P=a(4),_=a(26),B=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||P.c,R=Object(P.d)(f,B(Object(P.a)(_.a)));window.store=R;var w=R;o.a.render(r.a.createElement(S,{store:w}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[29,1,2]]]);
//# sourceMappingURL=main.6a3509dc.chunk.js.map